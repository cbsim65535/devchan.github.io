---
title: "TDD를 중요하게 바라보지 않습니다"
date: 2025-05-09
layout: post
tags: [설계철학]
---

# TDD를 중요하게 바라보지 않습니다

저는 더 이상 "TDD 합시다"라고 말하지 않습니다.  
대신 이렇게 말합니다:

> “TDD 하면 좋죠. 최소한만 해두세요.”  
> “그보다 먼저, 흐름과 관측 지점부터 설계해둡시다.”

제품을 만들 때,  
모든 사용성과 흐름을 처음부터 예측할 수는 없습니다.  
그래서 저는 테스트보다 **흐름의 구조**,  
예측보다 **관측 가능한 시스템**을 먼저 고민합니다.

이 글은 제가 왜 TDD보다 **관측 가능성과 추적 가능한 구조**를 더 중요하게 생각하게 되었는지를,  
제가 겪은 기술 흐름을 따라 설명해보려는 시도입니다.

그 흐름은 이렇게 요약됩니다:

> **EDA → MSA → Metrics → O11y**

그리고 그 안에서 저는  
**분산 컴퓨팅**, **데이터 중심 설계**,  
**메시징 구조**, **Gateway와 Bridge**에 집중하며  
흐름을 설계해왔습니다.

---

## 내가 걸어온 사고의 흐름: EDA → MSA → Metrics → O11y

돌이켜보면 저는 테스트를 먼저 설계하는 것보다,  
흐름을 어떻게 만들고 그것을 어떻게 관측할 수 있을지를 먼저 고민해왔습니다.

이 과정에서 자연스럽게 다음과 같은 사고 흐름을 밟아왔습니다:

### ▸ EDA (Event-Driven Architecture)

계산은 필요할 때만 일어나야 한다고 생각했습니다.  
불필요한 연산을 줄이고, 시스템이 반응할 수 있는 조건을 정의하려면  
**이벤트 기반의 구조**가 가장 적합했습니다.

이 방식은 자원을 아끼는 것이 목적이었지만,  
결국 시스템 흐름을 **관측 가능한 단위로 나누는 첫 출발**이기도 했습니다.

### ▸ MSA (Microservices Architecture)

흐름을 더 작게 나누기 위해, 저는 점점 책임 단위를 나누게 되었습니다.  
경계가 생기고, 흐름이 독립되면 **서비스 간의 결합도는 낮아지고**  
대신 **추적 가능한 지점은 늘어납니다.**

MSA는 목적이라기보다는 **흐름 중심 설계의 결과**였습니다.

### ▸ Metrics (Data-Driven Development)

분산된 흐름을 관리하려면,  
"무슨 일이 벌어졌는가"를 **데이터로 해석할 수 있어야** 했습니다.  
그래서 흐름마다 **지표를 정의**했고,  
이 지표는 점차 **시스템 해석의 기준**이 되었습니다.

코드가 아닌 데이터를 기준으로 판단하는 것이 자연스러워졌습니다.

### ▸ O11y (Observability)

결국 모든 흐름이 이 질문으로 모였습니다:

> **“지금 무슨 일이 벌어지고 있는가?”**

이 질문은 단순히 로그를 남기자는 뜻이 아닙니다.  
**흐름을 설계할 때부터 관측 지점을 함께 정의해야 한다**는 의미였습니다.

이 흐름 위에서 저는  
TDD보다 먼저 **관측 가능한 구조**를 설계하는 것이  
지속 가능한 시스템의 출발점이라는 결론에 도달하게 되었습니다.

---

## ODD는 내가 해오던 개발과 닮아 있었습니다

ODD(_Observability-Driven Development_)라는 개념을 처음 접했을 때,  
저는 그것이 완전히 새로운 접근이라고 느끼지 않았습니다.

오히려 이런 생각이 들었습니다:

> "**내가 해오던 개발과 닮아 있다.**"

저는 **SRE 관점에서 출발하지 않았습니다.**  
운영 효율이나 장애 대응보다는,  
**시스템 내부의 흐름을 설계하고 해석하는 구조**에 관심이 있었습니다.

제가 고민해온 출발점은 다음과 같았습니다:

- **분산 컴퓨팅 환경에서 어떻게 자원을 효율적으로 쓸 것인가?**  
- **이벤트 기반의 비동기 흐름을 어떻게 추적 가능한 단위로 만들 것인가?**  
- **시스템 동작을 어떻게 데이터로 해석할 것인가?**

이러한 질문에서 출발해  
흐름을 나누고, 경계를 만들고, 데이터를 모으다 보니  
결국 도달한 것이 **관측 가능성 중심의 구조**였습니다.

ODD는 이 흐름을 **더 정제된 언어로 설명해주고 있습니다.**  
**설계자로서 갖고 있던 문제의식이 그 철학과 맞닿아 있다고 느꼈습니다.**

---

## 메시징은 흐름의 언어입니다

흐름을 추적 가능한 구조로 만들기 위해  
제가 가장 집중해온 기술적 수단은 **메시징**(_Messaging_)입니다.

처음에는 단순히 비동기 처리를 위한 도구로 접근했지만,  
메시지를 중심에 두고 시스템을 바라보면서  
저는 **메시징이 흐름을 설명하는 가장 강력한 구조적 언어**라고 확신하게 되었습니다.

메시징의 특징은 단순하지만 강력합니다:

- 흐름의 **단위를 분명히 정의**할 수 있습니다.  
- **시간과 공간을 분리**해줍니다.  
- 서비스 간 **결합을 낮추고**,  
- 시스템 내부에서 **무슨 일이 언제 일어났는지를 기록**할 수 있게 해줍니다.

메시지는 단순한 통신 수단이 아닙니다.  
그것은 **시스템을 분해하고 설명하며, 추적 가능하게 만들어주는 단위**입니다.

그래서 저는 코드보다 메시지를 먼저 설계합니다.  
그 흐름이 곧 시스템의 형태를 정의한다고 믿기 때문입니다.

---

## Gateway와 Bridge는 흐름의 출입구입니다

흐름을 관측하려면, 그 흐름이 지나가는 **명확한 지점**이 있어야 합니다.  
제가 중요하게 여기는 두 구조는 바로 **Gateway**와 **Bridge**입니다.

### ▸ Gateway: 흐름의 진입점과 종착지

Gateway는 시스템의 입구와 출구를 동시에 책임집니다.  
요청이 들어오고, 응답이 나가며, 오류가 발생하고, 지연이 발생하는 그 모든 순간이  
Gateway를 통해 **기록되고 측정될 수 있습니다.**

저는 이 지점을 단순한 API 경유지가 아니라  
**관측과 계측의 가장 중요한 시작점**으로 봅니다.

- 요청 단위로 Metrics를 쌓고  
- 트랜잭션 단위로 추적 지점을 확보하며  
- 외부와 내부의 경계를 설계합니다

### ▸ Bridge: 도메인 간 흐름의 전환점

Bridge는 서로 다른 흐름, 다른 해석 체계, 다른 도메인을 연결합니다.  
여기서는 단순히 메시지를 넘기는 것이 아니라  
**흐름을 다시 정의하고, 새롭게 해석 가능한 구조로 바꾸는 일**이 필요합니다.

Bridge를 통해  
- 메시지를 포맷팅하고  
- 책임을 전환하며  
- 시스템 간 연결을 느슨하게 만듭니다

저는 이 구조들을  
**분산된 흐름을 이어주는 구조적 인터페이스**이자  
**추적 가능한 흐름 전환의 핵심 지점**으로 설계합니다.

---

## Design-First로 시작하고, 필요할 때 나눕니다

처음부터 MSA를 선택하진 않습니다.  
중요한 건 기술 스택이 아니라 **흐름과 경계를 어떻게 설계하느냐**입니다.

그래서 저는 언제나 **Design-First**로 시작합니다.

> "흐름을 먼저 설계하고,  
> 관측 가능한 구조를 갖춘 다음,  
> 필요할 때 나눕니다."

초기에는 하나의 모놀리식 구조로 빠르게 실행합니다.  
하지만 그 안에서도 반드시 다음을 준비해둡니다:

- 흐름마다 메시징 구조를 설계하고  
- 도메인 간 책임을 분리하고  
- Metrics를 수집할 지점을 정해둡니다

이러한 준비가 되어 있다면,  
모놀리식이라 해도 언제든지 **확장 가능하고 추적 가능한 시스템**으로 나아갈 수 있습니다.

**MSA는 설계의 목적이 아니라 결과입니다.**  
경계가 먼저 정의되어야 나눌 수 있고,  
흐름이 명확해야 분산할 수 있습니다.

---

## 효율과 흐름과 추적이 생각의 중심점입니다.

제가 시스템을 바라볼 때 중심에 두는 사고의 기준은 세 가지입니다:

> **효율**, **흐름**, 그리고 **추적 가능성**

우선, 컴퓨팅 자원은 유한합니다.  
그렇기에 저는 항상 먼저 이렇게 묻습니다:

> “**이 연산은 꼭 지금 해야 하는가?**”  
> “**이 구조는 자원을 낭비하지 않고 흘러갈 수 있는가?**”

그래서 자연스럽게 **이벤트 중심**으로 동작하는 구조,  
즉 **분산되고 비동기적인 흐름**을 설계하게 되었습니다.

다음은 흐름입니다.  
흐름이 설계되지 않은 시스템은 언제나 불안정합니다.  
**요청과 응답, 트리거와 처리, 전송과 저장**이  
설계된 순서대로 일어나야 의미 있는 시스템이 됩니다.

그리고 마지막은 추적입니다.  
흐름이 잘 설계되었더라도,  
**그 흐름이 실제로 그렇게 흘렀는지 알 수 없다면**  
우리는 시스템을 소유했다고 말할 수 없습니다.

그래서 저는 메시지 단위로 흐름을 정의하고,  
Gateway와 Bridge 구조에서 경계와 책임을 나누며,  
**관측 가능한 구조 자체를 설계의 일부로 간주**합니다.

제가 중요하게 생각해온 관점은  
운영 관점의 모니터링이 아닌,  
**설계 관점의 해석 가능성과 흐름 통제**였습니다.

그런 관점에서 **ODD는 제가 생각하는 설계 철학과 매우 닮아있다고 느낍니다.**

---

## 결론: 중요한 것은 흐름과 구조입니다.

TDD는 훌륭한 도구입니다.  
하지만 저에게 더 중요한 질문은 언제나 이것이었습니다:

> **“지금 무슨 일이 벌어지고 있는가?”**

이 질문에 답할 수 있는 시스템을 만들기 위해  
저는 흐름을 나누고, 메시지를 설계하고,  
Gateway와 Bridge 구조를 고민해왔습니다.

그 중심에는 **분산 컴퓨팅**,  
**데이터 중심 해석**,  
그리고 **관측 가능한 구조 설계**가 있었습니다.

ODD는 나중에 접한 개념이지만,  
제가 해오던 고민을 더 정확하게 설명해주는 언어였습니다.

---

이러한 철학이 단순한 이론이 아니라는 점은,  
제가 경험한 **ROS**(_Robot Operating System_)를 통해 확인할 수 있었습니다.

ROS는 메시지 기반 분산 컴퓨팅을 TCP 위에서 안정적으로 구현한 구조였고,  
센서, 액추에이터, 제어 노드들이 **서로 메시지로 느슨하게 연결된 구조**였습니다.

이 환경에서 저는 다음을 몸으로 체득했습니다:

- **메시지가 흐름을 정의한다는 것**  
- **각 구성 요소가 추적 가능한 단위로 분리될 수 있다는 것**  
- **관측 가능성과 분산 효율성이 함께 작동할 수 있다는 것**

이 경험은  
제가 **메시지를 먼저 설계하고**,  
**흐름과 구조를 그 위에 세우는 방식**을 확신하게 만든 계기였습니다.

---

저는 TDD보다 앞서  
**흐름을 먼저 설계하고, 관측 가능성을 확보하는 개발**을 지향합니다.  
그리고 그것이야말로  
**시스템의 복잡도와 성장 속도를 감당할 수 있는 구조**라고 믿고 있습니다.



