---
layout: post
title: "레거시 기술부채를 구조적으로 해결한 네트워크 장애 대응"
date: 2025-03-26
tags: [프로젝트]
---

### 1. 문제 배경: 반복되는 장애와 기술부채의 누적

- 합류 초기,**실시간 영상 전송 기능**에서 매월 장애가 지속적으로 발생
- 기존 시스템은 장애 시 수동 대응에 의존, **원인 파악 불명확**
- 해당 로직은 레거시로 남아 있던 상태였고, **문제는 인지되고 있었지만 지속적으로 방치된 기술부채 상태**

---

### 2. 문제 분석: 구조적 원인 도출

- 로그 및 모니터링 분석을 통해, **reconnection 시점에서 서비스가 복구되지 않는 현상** 확인
- 현장 네트워크가 불안정한 환경에서 **디바이스의 네트워크 재연결(reconnection)** 과정에서 장애가 유발됨
- 인프라 자체를 개선하기 어려운 상황(건물 구조, 공공망, 제약된 현장 장비)
- 문제는 '네트워크 불안정성' 그 자체가 아닌, **재연결 후의 복구 실패**에 있음

---

### 3. 해결 전략: 회복 가능한 시스템으로의 전환

| 전략 요소 | 설명 |
| --- | --- |
| 핵심 방향 | 네트워크 장애를 제거할 수 없다면, **회복 가능성(Resilience)**을 설계하자 |
| 워치독 로직 | 브릿지 서버에서 발생하는 **카메라 감지 이벤트를 워치독으로 전환** |
| 자동 복구 | 연결 재시도 성공 시 자동으로 서비스 상태를 복구하도록 처리 |
| CS 감소 목표 | 기존 수동 대응을 제거하고, **사용자 불편 이전에 시스템이 자가복구**하는 구조로 전환 |

---

### 4. 실행 결과

- 서비스 중단 없이 자동 복구되는 사례 다수 발생
- **CS 접수 건수: 월 3건 이상 → 0.2건 이하로 감소**
- 문제의 원인을 인프라에서 애플리케이션 회복 설계로 전환해 해결
- **레거시 코드 중 “비정상 상황에서의 처리 부재”라는 기술부채를 근본적으로 해소**

---

### 5. 회고 및 인사이트

- 이 경험은 단순한 장애 처리나 기능 개선이 아니라,
    
    **기술부채를 구조적으로 정의하고 시스템 전환을 통해 해결한 아키텍처 사례**임
    
- IoT 환경에서는 현장을 바꿀 수 없기 때문에, **제약을 인정하고 회복성을 설계하는 것이 가장 현실적인 전략**
- **“무엇을 바꿀 수 없을 때, 어디를 바꿔야 하는가”를 판단하는 것이 아키텍트의 역할**임을 체감

---

### 시각 자료 구성 예시

### ▸ Before-After 흐름도 (네트워크 장애 시 처리 구조)

```
plaintext
복사편집
[Before]
Disconnection 발생
 → 재연결 시도
 → 영상 미복구 / 사용자 CS 발생
 → 수동 처리

[After]
Disconnection 발생
 → 재연결 시도
 → 감지 이벤트 발생
 → 시스템 자동복구
 → 사용자 무인식 상태로 정상 전환

```

### ▸ 장애 발생 건수 차트

| --- | --- |
| 시점	| 월 장애 접수 건수 |
| 개선 전 | (평균)	3건 이상 |
| 개선 후	| 0.2건 이하 |